/* -----------------------------------------------------------------

* 文件名：	洛神公司40.68mhz-25w分体式设备分体式控制板程序		   *
* 时间：	2022年7月1日							    		   *
* 编写者：	叶勇												   *
* 版本号 	share03_v1.0								   		   *
* MCU:		GD32F250C8T6	                             		   *

/* ----------------------------------------------------------------*/

修改记录：



功能说明：
1：通过R31或R32 0R电阻焊接，确定BOOT0的值，来确定引导源选择，如果R32焊接好0R，那么就是在主FLASH存储器引导（也是默认的）
	如果R31焊接好0R(R32不能焊接)，通过系统配置寄存器（SYSCFG）的BOOT_MODE，BOTT1-n值来确定，如果BOTT1-n = 0,那么就是从
	系统存储器引导，如果BOTT1-n = 1，那么就是从片上SRAM引导。---搞定
	
2：P1接口GND SWCLK SWDIO 3.3V 连接GD-LINK调试器，进行调试。---搞定

3：P2接口连接按键灯板的P3接口，实现13.56mhzM1卡的识别，采用SPI协议。
	PB13->RST(设置为推完输出，50MHZ),PB12->NSS(设置为推完输出，50MHZ)
	PA5->SPI_CLK(设置为复用SPI功能引脚)，PA6->MISO(设置为复用SPI功能引脚)
	PA7->MISI(设置为复用SPI功能引脚)。
	控制板(主)   与   按键灯板（从）   连接示意图
	RST(PB13)	 ->		RST
	NSS(PB12)	 ->		NSS
	CLK(PA5)	 ->		CLK
	MISO(PA6)	 -> 	MISO
	MISI(PA7)	 -> 	MISI
	实现对M1卡的识别，读，写的过程（M1卡的难易程度待定）。
	
4：P3接口通过排线连接蓝牙模块（易加物联的ECB02H2）连接，目前不对蓝牙设置，只要能上传串口0发送的数据就行，
	对于通过蓝牙控制设备的协议等要求，等待上位机确定。
	串口0设置（波特率：115200，校验位：none，数据位：8，停止位：1）.
	
5：按键KEY(PA11，设置为上拉输入)，来控制三个（5W,10W,15W）档位，实际就是该RF_POWER的值（启动DAC（PA4） 输出电压值）
	
6：D2LED灯每秒闪烁一次，PB2(设置为推完输出，50MHZ,上拉)。---搞定

7：蜂鸣器报警，在开机、温度过高等进行报警，提示顾客，PB10(设置为推完输出，50mhz，上拉)。

8：风扇启动（低电平0）和关闭（高电平1），FAN(PB11)设置位推完输出，50mhz，上拉。

9：每秒进行温度采集，采用热敏电阻（3950）10k，正负1%误差，进行分压进行ADC采集（PA0(ADC_IN0)）、软件上采用查询的方式.
   当温度超过70摄氏度，RF输出关闭，报警，暂停按键功能，待温度降到45摄氏度，恢复按键功能。可以再次开启RF输出。
   
10：P10接口通过排线连接按键灯板，控制灯亮和灭。
	LED0_R(PA15)、LED0_W(PB3)、LED1_R(PB4)、LED1_W(PB5)、LED2_R(PB6)、LED2_W(PB7)、LED3_R(PB8)、LED3_W(PB9) 
	这8个引脚设置为推完输出，上拉，50mhz。---搞定

11：P9接口连接距离传感器，采集电压判断设备是否链接手柄，PB1(ADC_IN9). 采集电压小于1V，说明手柄链接好了，否则认为手柄未连接，不允许RF输出。

12：每秒采集一次电池的电压，实时判断电压是否7.2V,当低于7.2V，说明电池需要充电，报警加灯闪烁来提示顾客，
	当低于7.1V,说明关闭所有输出，MCU进行待机状态，通过上电复位重新启动。

13：P13接口连接RF板，
	12V引脚通过PA8(设置为推完输出，50MZ,上拉)。控制12V的输出（PA8为1），还是关闭（PA8为0）。
	RF_7.4V引脚通过PB15（设置为推完输出，50mhz，上拉），控制7.5V的输出（PB15为0），还是关闭（PB15为1）
	RF_POWER引脚通过PA4（DAC功能）控制RF输出功率。
	RF_OUT引脚通过PA12(设置为推完输出，50MHZ,上拉)，控制RF输出的关闭开（0）关（1）。



	
	